# –ü–õ–ê–ù –†–ï–ê–õ–ò–ó–ê–¶–ò–ò –§–ò–õ–¨–¢–†–û–í –ü–û–ò–°–ö–ê

## üéØ –¶–ï–õ–¨
–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã –ø–æ–∏—Å–∫–∞ –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è –∫–∞—á–µ—Å—Ç–≤–∞ –ø–æ–¥–±–æ—Ä–∞ —Ç–∏–º–º–µ–π—Ç–æ–≤

## üìä –¢–ï–ö–£–©–ï–ï –°–û–°–¢–û–Ø–ù–ò–ï

### ‚úÖ –ß–¢–û –£–ñ–ï –ï–°–¢–¨:
1. **–ú–æ–¥–µ–ª—å UserSettings** —Å –ø–æ–ª—è–º–∏:
   - `search_radius: int = 3`  
   - `notifications_enabled: bool = True`
   - `preferred_maps: Optional[List[str]] = None`
   - `max_matches_per_day: int = 20`

2. **–ü–æ–∏—Å–∫ —Ç–∏–º–º–µ–π—Ç–æ–≤:**
   - `find_candidates()` –≤ DatabaseManager
   - –ê–ª–≥–æ—Ä–∏—Ç–º —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ `calculate_profile_compatibility()`
   - –ü–æ–∫–∞–∑ –∞–Ω–∫–µ—Ç —Å –ª–∞–π–∫–∞–º–∏/–ø—Ä–æ–ø—É—Å–∫–∞–º–∏

3. **–ú–µ–Ω—é –Ω–∞—Å—Ç—Ä–æ–µ–∫:**
   - –ö–Ω–æ–ø–∫–∞ "üéØ –§–∏–ª—å—Ç—Ä—ã –ø–æ–∏—Å–∫–∞" (–∑–∞–≥–ª—É—à–∫–∞)
   - –ë–∞–∑–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤

### ‚ùå –ß–¢–û –ù–£–ñ–ù–û –î–û–ë–ê–í–ò–¢–¨:
- –†–∞—Å—à–∏—Ä–∏—Ç—å UserSettings –Ω–æ–≤—ã–º–∏ —Ñ–∏–ª—å—Ç—Ä–∞–º–∏
- –ú–µ—Ç–æ–¥—ã –≤ DatabaseManager –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏
- UI –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Ñ–∏–ª—å—Ç—Ä–æ–≤
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Ñ–∏–ª—å—Ç—Ä–æ–≤ –≤ –ø–æ–∏—Å–∫

---

## üîß –ü–õ–ê–ù–ò–†–£–ï–ú–´–ï –§–ò–õ–¨–¢–†–´

### 1. **ELO –¥–∏–∞–ø–∞–∑–æ–Ω**
```
–ò—Å–∫–∞—Ç—å –∏–≥—Ä–æ–∫–æ–≤ —Å ELO: 
‚îú‚îÄ‚îÄ üìâ –ù–∏–∂–µ –º–æ–µ–≥–æ (-200 ELO)
‚îú‚îÄ‚îÄ ‚öñÔ∏è –ü–æ—Ö–æ–∂–µ–≥–æ —É—Ä–æ–≤–Ω—è (¬±100 ELO)  
‚îú‚îÄ‚îÄ üìà –í—ã—à–µ –º–æ–µ–≥–æ (+200 ELO)
‚îî‚îÄ‚îÄ üåç –õ—é–±–æ–π —É—Ä–æ–≤–µ–Ω—å (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
```

### 2. **–ü—Ä–µ–¥–ø–æ—á–∏—Ç–∞–µ–º—ã–µ —Ä–æ–ª–∏**
```
–ò—Å–∫–∞—Ç—å –∏–≥—Ä–æ–∫–æ–≤ —Å —Ä–æ–ª—è–º–∏:
‚îú‚îÄ‚îÄ üéØ AWPer
‚îú‚îÄ‚îÄ ‚ö° Entry  
‚îú‚îÄ‚îÄ üõ°Ô∏è Support
‚îú‚îÄ‚îÄ üëë IGL
‚îú‚îÄ‚îÄ ü•∑ Lurker
‚îî‚îÄ‚îÄ ‚úÖ –õ—é–±—ã–µ —Ä–æ–ª–∏ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
```

### 3. **–°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å –∫–∞—Ä—Ç**
```
–ò—Å–∫–∞—Ç—å –ø–æ –∫–∞—Ä—Ç–∞–º:
‚îú‚îÄ‚îÄ üó∫Ô∏è –¢–æ–ª—å–∫–æ –æ–±—â–∏–µ –∫–∞—Ä—Ç—ã (—Å—Ç—Ä–æ–≥–æ)
‚îú‚îÄ‚îÄ üéØ –ú–∏–Ω–∏–º—É–º 2 –æ–±—â–∏–µ –∫–∞—Ä—Ç—ã (—É–º–µ—Ä–µ–Ω–Ω–æ)
‚îú‚îÄ‚îÄ üåç –ú–∏–Ω–∏–º—É–º 1 –æ–±—â–∞—è –∫–∞—Ä—Ç–∞ (–º—è–≥–∫–æ)
‚îî‚îÄ‚îÄ ‚≠ê –ë–µ–∑ —É—á–µ—Ç–∞ –∫–∞—Ä—Ç (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
```

### 4. **–í—Ä–µ–º—è –∏–≥—Ä—ã**
```
–ò—Å–∫–∞—Ç—å –ø–æ –≤—Ä–µ–º–µ–Ω–∏:
‚îú‚îÄ‚îÄ ‚è∞ –¢–æ–ª—å–∫–æ –æ–±—â–µ–µ –≤—Ä–µ–º—è (—Å—Ç—Ä–æ–≥–æ)
‚îú‚îÄ‚îÄ üïê –ú–∏–Ω–∏–º—É–º 1 –æ–±—â–∏–π —Å–ª–æ—Ç (–º—è–≥–∫–æ)  
‚îî‚îÄ‚îÄ üåç –ë–µ–∑ —É—á–µ—Ç–∞ –≤—Ä–µ–º–µ–Ω–∏ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
```

### 5. **–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å**
```
–ü–æ—Ä–æ–≥ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏:
‚îú‚îÄ‚îÄ üî• –í—ã—Å–æ–∫–∞—è (70%+)
‚îú‚îÄ‚îÄ ‚öñÔ∏è –°—Ä–µ–¥–Ω—è—è (50%+)
‚îú‚îÄ‚îÄ üìâ –ù–∏–∑–∫–∞—è (30%+) [—Ç–µ–∫—É—â–∏–π]
‚îî‚îÄ‚îÄ üåç –õ—é–±–∞—è (0%+)
```

---

## üìã –ó–ê–î–ê–ß–ò –î–õ–Ø –†–ï–ê–õ–ò–ó–ê–¶–ò–ò

### –ó–ê–î–ê–ß–ê 1: –†–∞—Å—à–∏—Ä–∏—Ç—å –º–æ–¥–µ–ª—å UserSettings
**–í—Ä–µ–º—è:** 30 –º–∏–Ω—É—Ç
- [ ] –î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª—è –¥–ª—è –Ω–æ–≤—ã—Ö —Ñ–∏–ª—å—Ç—Ä–æ–≤
- [ ] –û–±–Ω–æ–≤–∏—Ç—å —Å—Ö–µ–º—É –ë–î  
- [ ] –î–æ–±–∞–≤–∏—Ç—å –º–µ—Ç–æ–¥—ã —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–∏

### –ó–ê–î–ê–ß–ê 2: –û–±–Ω–æ–≤–∏—Ç—å DatabaseManager
**–í—Ä–µ–º—è:** 45 –º–∏–Ω—É—Ç
- [ ] `get_user_settings(user_id)` - –ø–æ–ª—É—á–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫
- [ ] `update_user_settings(user_id, **kwargs)` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
- [ ] `create_default_settings(user_id)` - —Å–æ–∑–¥–∞–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
- [ ] –û–±–Ω–æ–≤–∏—Ç—å `find_candidates()` –¥–ª—è —É—á–µ—Ç–∞ —Ñ–∏–ª—å—Ç—Ä–æ–≤

### –ó–ê–î–ê–ß–ê 3: UI –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Ñ–∏–ª—å—Ç—Ä–æ–≤ 
**–í—Ä–µ–º—è:** 2 —á–∞—Å–∞
- [ ] –ú–µ–Ω—é –≤—ã–±–æ—Ä–∞ —Ç–∏–ø–∞ —Ñ–∏–ª—å—Ç—Ä–∞
- [ ] –ù–∞—Å—Ç—Ä–æ–π–∫–∞ ELO –¥–∏–∞–ø–∞–∑–æ–Ω–∞
- [ ] –í—ã–±–æ—Ä –ø—Ä–µ–¥–ø–æ—á–∏—Ç–∞–µ–º—ã—Ö —Ä–æ–ª–µ–π
- [ ] –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ –∫–∞—Ä—Ç –∏ –≤—Ä–µ–º–µ–Ω–∏
- [ ] –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–æ—Ä–æ–≥–∞ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏

### –ó–ê–î–ê–ß–ê 4: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ –ø–æ–∏—Å–∫
**–í—Ä–µ–º—è:** 1 —á–∞—Å  
- [ ] –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —Ñ–∏–ª—å—Ç—Ä–æ–≤ –≤ `find_candidates()`
- [ ] –ü–æ–∫–∞–∑ –∞–∫—Ç–∏–≤–Ω—ã—Ö —Ñ–∏–ª—å—Ç—Ä–æ–≤ –≤ –º–µ–Ω—é –ø–æ–∏—Å–∫–∞
- [ ] –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ ("–ù–∞–π–¥–µ–Ω–æ X –∏–∑ Y")

### –ó–ê–î–ê–ß–ê 5: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –ø–æ–ª–∏—Ä–æ–≤–∫–∞
**–í—Ä–µ–º—è:** 30 –º–∏–Ω—É—Ç
- [ ] –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã –∫–∞–∂–¥–æ–≥–æ —Ñ–∏–ª—å—Ç—Ä–∞
- [ ] –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–±—Ä–æ—Å–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫
- [ ] –í–∞–ª–∏–¥–∞—Ü–∏—è –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π

---

## üéÆ –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–¨–°–ö–ò–ô FLOW

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ñ–∏–ª—å—Ç—Ä–æ–≤:
```
[–ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é] 
    ‚Üì "‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏"
[–ú–µ–Ω—é –Ω–∞—Å—Ç—Ä–æ–µ–∫]
    ‚Üì "üéØ –§–∏–ª—å—Ç—Ä—ã –ø–æ–∏—Å–∫–∞"
[–°–ø–∏—Å–æ–∫ —Ñ–∏–ª—å—Ç—Ä–æ–≤: ELO | –†–æ–ª–∏ | –ö–∞—Ä—Ç—ã | –í—Ä–µ–º—è | –ü–æ—Ä–æ–≥]
    ‚Üì "üìä ELO –¥–∏–∞–ø–∞–∑–æ–Ω"
[–í—ã–±–æ—Ä: –ù–∏–∂–µ | –ü–æ—Ö–æ–∂–∏–π | –í—ã—à–µ | –õ—é–±–æ–π] 
    ‚Üì "‚öñÔ∏è –ü–æ—Ö–æ–∂–µ–≥–æ —É—Ä–æ–≤–Ω—è"
[–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ + –≤–æ–∑–≤—Ä–∞—Ç –∫ —Å–ø–∏—Å–∫—É —Ñ–∏–ª—å—Ç—Ä–æ–≤]
```

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ –ø–æ–∏—Å–∫–µ:
```
[–ü–æ–∏—Å–∫ —Ç–∏–º–º–µ–π—Ç–æ–≤]
    ‚Üì –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç "üîç –ü–æ–∏—Å–∫ (3 —Ñ–∏–ª—å—Ç—Ä–∞ –∞–∫—Ç–∏–≤–Ω–æ)"  
[–†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å —É—á–µ—Ç–æ–º —Ñ–∏–ª—å—Ç—Ä–æ–≤]
    ‚Üì "–ù–∞–π–¥–µ–Ω–æ 15 –∏–∑ 50 –∏–≥—Ä–æ–∫–æ–≤"
[–ê–Ω–∫–µ—Ç—ã —Ç–æ–ª—å–∫–æ –ø–æ–¥—Ö–æ–¥—è—â–∏—Ö –∫–∞–Ω–¥–∏–¥–∞—Ç–æ–≤]
```

---

## üõ† –¢–ï–•–ù–ò–ß–ï–°–ö–ò–ï –î–ï–¢–ê–õ–ò

### –û–±–Ω–æ–≤–ª–µ–Ω–Ω–∞—è –º–æ–¥–µ–ª—å UserSettings:
```python
@dataclass
class UserSettings:
    user_id: int
    
    # –°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ
    search_radius: int = 3
    notifications_enabled: bool = True  
    preferred_maps: Optional[List[str]] = None
    max_matches_per_day: int = 20
    
    # –ù–æ–≤—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã
    elo_filter: str = "any"  # "lower", "similar", "higher", "any"
    preferred_roles: Optional[List[str]] = None  # ["AWPer", "Support"]
    maps_compatibility: str = "any"  # "strict", "moderate", "soft", "any" 
    time_compatibility: str = "any"  # "strict", "soft", "any"
    min_compatibility: int = 30  # –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å –≤ %
```

### –õ–æ–≥–∏–∫–∞ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –≤ find_candidates():
```python
async def find_candidates(self, user_id: int, limit: int = 20):
    # –ü–æ–ª—É—á–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    settings = await self.get_user_settings(user_id)
    user_profile = await self.get_profile(user_id)
    
    # –ë–∞–∑–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å
    candidates = await self._get_base_candidates(user_id)
    
    # –ü—Ä–∏–º–µ–Ω–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã
    if settings.elo_filter != "any":
        candidates = filter_by_elo(candidates, user_profile.faceit_elo, settings.elo_filter)
    
    if settings.preferred_roles:
        candidates = filter_by_roles(candidates, settings.preferred_roles)
        
    # –ò —Ç.–¥. –¥–ª—è –æ—Å—Ç–∞–ª—å–Ω—ã—Ö —Ñ–∏–ª—å—Ç—Ä–æ–≤
    
    return candidates[:limit]
```

---

## üìä –û–ñ–ò–î–ê–ï–ú–´–ï –†–ï–ó–£–õ–¨–¢–ê–¢–´

### –î–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:
- ‚úÖ **–ö–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –º–∞—Ç—á–∏** - —Ç–æ–ª—å–∫–æ –ø–æ–¥—Ö–æ–¥—è—â–∏–µ –∏–≥—Ä–æ–∫–∏
- ‚úÖ **–≠–∫–æ–Ω–æ–º–∏—è –≤—Ä–µ–º–µ–Ω–∏** - –º–µ–Ω—å—à–µ –Ω–µ–ø–æ–¥—Ö–æ–¥—è—â–∏—Ö –∞–Ω–∫–µ—Ç  
- ‚úÖ **–ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è** - –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ–¥ —Å–≤–æ–π —Å—Ç–∏–ª—å –∏–≥—Ä—ã
- ‚úÖ **–ö–æ–Ω—Ç—Ä–æ–ª—å –ø—Ä–æ—Ü–µ—Å—Å–∞** - –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏

### –î–ª—è —Å–∏—Å—Ç–µ–º—ã:
- ‚úÖ **–£–ª—É—á—à–µ–Ω–∏–µ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏** - –±–æ–ª–µ–µ —Ç–æ—á–Ω—ã–π –∞–ª–≥–æ—Ä–∏—Ç–º
- ‚úÖ **–°–Ω–∏–∂–µ–Ω–∏–µ –Ω–∞–≥—Ä—É–∑–∫–∏** - –º–µ–Ω—å—à–µ –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤ –Ω–µ–ø–æ–¥—Ö–æ–¥—è—â–∏—Ö –∞–Ω–∫–µ—Ç
- ‚úÖ **–ê–Ω–∞–ª–∏—Ç–∏–∫–∞** - –¥–∞–Ω–Ω—ã–µ –æ –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- ‚úÖ **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å** - –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ —Ä–æ—Å—Ç—É –±–∞–∑—ã

---

## üöÄ –ü–û–†–Ø–î–û–ö –†–ï–ê–õ–ò–ó–ê–¶–ò–ò

1. **–°–Ω–∞—á–∞–ª–∞:** –†–∞—Å—à–∏—Ä–∏—Ç—å –º–æ–¥–µ–ª—å –∏ –ë–î (–æ—Å–Ω–æ–≤–∞)
2. **–ó–∞—Ç–µ–º:** –ë–∞–∑–æ–≤—ã–π UI –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Ñ–∏–ª—å—Ç—Ä–æ–≤  
3. **–ü–æ—Ç–æ–º:** –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ –ø–æ–∏—Å–∫ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
4. **–§–∏–Ω–∞–ª:** –ü–æ–ª–∏—Ä–æ–≤–∫–∞ UX –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è

**–û–±—â–µ–µ –≤—Ä–µ–º—è:** 4-5 —á–∞—Å–æ–≤ —Ä–∞–±–æ—Ç—ã  
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –í—ã—Å–æ–∫–∏–π (–∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ —É–ª—É—á—à–∏—Ç UX –ø–æ–∏—Å–∫–∞)
**–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å:** –ú–æ–∂–Ω–æ –Ω–∞—á–∏–Ω–∞—Ç—å –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å!